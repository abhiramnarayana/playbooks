# Edit this according to your setup.
# Keep the dut and tgen aliases as those are used in the playbooks
#
# Expected topology;
#
# +-----+  vlan 210-215  +------+
# |     |----------------|      |
# | dut |  vlan 210-215  | tgen |
# |     |----------------|      |
# +-----+                +------+

all:
  vars:
    trex_dir: /tmp/trex-core
    datapath: dpdk
    vlan: 212

  hosts:
    dut:
      # edit according to your platform
      ansible_host: rhos-nfv-11.lab.eng.rdu2.redhat.com
      ports:
        - '0000:c4:00.0'
        - '0000:c4:00.1'
      dpdk_core_mask: '0x100000000000000010'
      n_rxq: 1
      queue_descriptors: 4096
      max_conntrack: 50000000
      # only used for hardware offload
      testpmd_core_ids: '4,5,6'
      testpmd_nb_cores: 2
      num_vfs: 2

      # expected results for every datapath
      hwol:
        cps_ct_short: 10000
        cps_ct_long: 4000
        conntrack_flush_cmd: conntrack -F
        vlan_pps: 14600000
      dpdk:
        cps_ct_short: 55000
        cps_ct_long: 500
        conntrack_flush_cmd: ovs-appctl dpctl/flush-conntrack
        vlan_pps: 8400000

    tgen:
      # edit according to your platform
      ansible_host: rhos-nfv-12.lab.eng.rdu2.redhat.com
      trex_config:
        - version: 2
          interfaces:
            - 'c4:00.0'
            - 'c4:00.1'
          rx_desc: 4096
          tx_desc: 4096
          port_info:
            - dest_mac: 04:3f:72:f2:8f:33
              src_mac:  04:3f:72:f2:8f:32
            - dest_mac: 04:3f:72:f2:8f:32
              src_mac:  04:3f:72:f2:8f:33
          c: 46
          memory:
            mbuf_64: 30720
            mbuf_128: 500000
            mbuf_256: 30717
            mbuf_512: 30720
            mbuf_1024: 30720
            mbuf_2048: 4096
          platform:
            master_thread_id: 0
            latency_thread_id: 64
            dual_if:
              - socket: 0
                threads: [
                  1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12,
                  65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76,
                  16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27,
                  80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91,
                ]
